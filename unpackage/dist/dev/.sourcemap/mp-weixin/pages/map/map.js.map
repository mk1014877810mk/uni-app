{"version":3,"sources":["webpack:///D:/Kun Meng/HBuilderProjects/tour/pages/map/map.vue","webpack:///D:/Kun Meng/HBuilderProjects/tour/pages/map/map.vue?4ac4","webpack:///D:/Kun Meng/HBuilderProjects/tour/pages/map/map.vue?a533","webpack:///D:/Kun Meng/HBuilderProjects/tour/pages/map/map.vue?533f","webpack:///D:/Kun Meng/HBuilderProjects/tour/pages/map/map.vue?8206","webpack:///D:/Kun Meng/HBuilderProjects/tour/pages/map/map.vue?b4b5","webpack:///D:/Kun Meng/HBuilderProjects/tour/pages/map/map.vue?4b97"],"names":["pointerW","pointerH","bmsW","bmsH","data","e_id","title","windowWidth","windowHeight","scale","logoSrc","z_id","showPointer","showList","currentIndex","currentTitle","map","initScale","height","img","width","src","x","y","pointer","position","originPointer","onLoad","options","$common","setNavTitle","$store","state","lastHallZid","getHallInfo","getMap","uni","getSystemInfo","success","res","methods","$api","then","status","hall_name","ajaxUrl","hall_logo","catch","err","console","log","hall_map","setTimeout","showTips","items_position","forEach","el","index","showPic","imgLoad","e","detail","tempX","tempY","upx2px","hall_position","split","top","hall_cover","key","Array","isArray","obj","k","push","imgTab","originPosition","i","$nextTick","$refs","pic","$attrs","flag","size","$el","style","bottom","pointion","bindscale","showOrHideList","goListDetail","navigateTo","url","components","myNav","scrollY"],"mappings":"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","file":"pages/map/map.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport myNav from '../components/nav'\nimport scrollY from '../components/scrollY'\nconst pointerW = 23; // 当前地图点图标宽度\nconst pointerH = 23; // 当前地图点图标高度\nconst bmsW = 20; // 后台地图点图标宽度\nconst bmsH = 20; // 后台地图点图标高度\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\te_id: 1,\n\t\t\ttitle: '',\n\t\t\twindowWidth: 0,\n\t\t\twindowHeight: 0,\n\t\t\tscale: 1, //px与rpx之间的转换系数\n\t\t\tlogoSrc: '',\n\t\t\tz_id: '',\n\t\t\tshowPointer: true, // 是否显示地图上展项坐标点\n\t\t\tshowList: false, // 是否展示展厅地图列表\n\t\t\tcurrentIndex: 0, // 当前所点击图标的索引\n\t\t\tcurrentTitle: '',\n\t\t\tmap: {\n\t\t\t\tinitScale: 1, // 地图初始化放大比例\n\t\t\t\tscale: 1, // 手指双滑放大的倍数\n\t\t\t\theight: 0,\n\t\t\t},\n\t\t\timg: {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t\tsrc: '',\n\t\t\t\tscale: 1, // 地图加载放大倍数\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t},\n\t\t\tpointer: {\n\t\t\t\twidth: pointerW,\n\t\t\t\theight: pointerH,\n\t\t\t\tposition: [] // 绑定的坐标集合\n\t\t\t},\n\t\t\toriginPointer: {}, // 原始坐标点数据备份 \n\t\t}\n\t},\n\t\n\tonLoad(options) {\n\t\tthis.e_id = options.e_id;\n\t\tthis.title = options.title;\n\t\tthis.$common.setNavTitle(this.title);\n\t\tthis.z_id = this.$store.state.lastHallZid || 87;\n\t\tthis.getHallInfo();\n\t\tthis.getMap(this.z_id);\n\t\tuni.getSystemInfo({\n\t\t\tsuccess: res => {\n\t\t\t\tthis.scale = res.windowWidth / 750;\n\t\t\t\tthis.map.height = res.windowHeight - 100 * this.scale;\n\t\t\t\tthis.windowHeight = res.windowHeight - 100 * this.scale;\n\t\t\t\tthis.windowWidth = res.windowWidth;\n\t\t\t}\n\t\t});\n\t},\n\n\tmethods: {\n\t\tgetHallInfo() {\n\t\t\tthis.$api.getHallInfo({\n\t\t\t\te_id: this.e_id\n\t\t\t}).then(res => {\n\t\t\t\tif (res.status == 1000) {\n\t\t\t\t\tthis.$common.setNavTitle(res.data.hall_name);\n\t\t\t\t\tthis.logoSrc = this.$store.state.ajaxUrl + res.data.hall_logo;\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.log('展厅信息获取失败');\n\t\t\t})\n\t\t},\n\n\t\tgetMap(z_id) {\n\t\t\tthis.$api.getMap({\n\t\t\t\tz_id\n\t\t\t}).then(res => {\n\t\t\t\tif (res.status == 1000) {\n\t\t\t\t\tif (res.data.hall_map == '' || !res.data.hall_map) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.$common.showTips('无对应地图,请选择其它地图');\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tres.data.items_position.forEach(function(el, index) {\n\t\t\t\t\t\tel.showPic = false;\n\t\t\t\t\t});\n\t\t\t\t\tthis.img.src = this.$store.state.ajaxUrl + res.data.hall_map;\n\t\t\t\t\tthis.pointer.position = res.data.items_position || [];\n\t\t\t\t\tthis.currentTitle = res.data.hall_name;\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.log('地图信息获取失败', err);\n\t\t\t});\n\t\t},\n\n\t\timgLoad(e) {\n\t\t\tconst width = e.detail.width,\n\t\t\t\theight = e.detail.height,\n\t\t\t\ttempX = this.windowWidth / width,\n\t\t\t\ttempY = this.windowHeight / height;\n\n\t\t\tthis.img.scale = tempX <= tempY ? tempY : tempX;\n\n\t\t\tthis.img.width = width * this.img.scale;\n\t\t\tthis.img.height = height * this.img.scale;\n\t\t\tthis.img.x = -1 * (this.img.width - this.windowWidth) / 2;\n\t\t\tthis.img.y = -1 * (this.img.height - this.map.height) / 2;\n\n\t\t\t// 位置赋值计算\n\t\t\tlet items_position = this.pointer.position;\n\n\t\t\titems_position.forEach((el, index) => {\n\t\t\t\tel.x = uni.upx2px(((el.hall_position.split(',')[0] * 1 + bmsW / 2) / this.scale) * this.img.scale - pointerW /\n\t\t\t\t\t2.4);\n\t\t\t\tel.y = uni.upx2px(((el.hall_position.split(',')[1] * 1 + bmsH / 2) / this.scale) * this.img.scale - pointerH /\n\t\t\t\t\t1.4);\n\t\t\t\tel.top = el.y > uni.upx2px(140);\n\t\t\t\tel.index = index;\n\t\t\t\tel.hall_cover = this.$store.state.ajaxUrl + el.hall_cover;\n\t\t\t});\n\n\t\t\tthis.showPointer = true;\n\t\t\tthis.pointer.position = items_position;\n\n\t\t\tlet originPointer = {};\n\t\t\tfor (let key in this.pointer) {\n\t\t\t\tif (typeof(this.pointer[key]) == 'object' && Array.isArray(this.pointer[key])) {\n\t\t\t\t\tlet position = [];\n\t\t\t\t\tthis.pointer[key].forEach((el, index) => {\n\t\t\t\t\t\tif (typeof(el) == 'object') {\n\t\t\t\t\t\t\tvar obj = {};\n\t\t\t\t\t\t\tfor (let k in el) {\n\t\t\t\t\t\t\t\tobj[k] = el[k];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tposition.push(obj);\n\t\t\t\t\t});\n\t\t\t\t\toriginPointer[key] = position;\n\t\t\t\t} else {\n\t\t\t\t\toriginPointer[key] = this.pointer[key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.originPointer = originPointer;\n\n\t\t},\n\n\t\tshowPic(index) {\n\t\t\tthis.imgTab();\n\t\t\tconst position = this.pointer.position;\n\t\t\tconst originPosition = this.originPointer.position;\n\n\t\t\tposition.forEach((el, i) => {\n\t\t\t\tel.showPic = originPosition[i].showPic = index == i ? !position[index].showPic : false;\n\t\t\t});\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tif (this.$refs.pic && this.$refs.pic[0] && this.$refs.pic[0].$attrs && !this.$refs.pic[0].$attrs.flag) {\n\t\t\t\t\tconst size = this.$refs.pic[0].$el.style.bottom;\n\t\t\t\t\tthis.$refs.pic[0].$el.style.bottom = 0;\n\t\t\t\t\tthis.$refs.pic[0].$el.style.top = size;\n\t\t\t\t} else {\n\t\t\t\t\tconst pointion = this.pointer.position;\n\t\t\t\t\tposition[index].top = true;\n\t\t\t\t\tthis.pointer.position = position;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.currentIndex = index;\n\t\t\tthis.pointer.position = position;\n\t\t\tthis.originPointer.position = originPosition;\n\t\t\t\n\t\t},\n\n\t\tbindscale: function(e) {\n\t\t\tconst scale = e.detail.scale;\n\t\t\tlet pointer = {};\n\t\t\tfor (let key in this.originPointer) {\n\t\t\t\tif (typeof(this.originPointer[key]) == 'object' && Array.isArray(this.originPointer[key])) {\n\t\t\t\t\tlet position = [];\n\t\t\t\t\tthis.originPointer[key].forEach((el, index) => {\n\t\t\t\t\t\tif (typeof(el) == 'object') {\n\t\t\t\t\t\t\tlet obj = {};\n\t\t\t\t\t\t\tfor (let k in el) {\n\t\t\t\t\t\t\t\tif (k == 'x') {\n\t\t\t\t\t\t\t\t\tobj[k] = el[k] + (scale - 1) * pointerW / 8;\n\t\t\t\t\t\t\t\t} else if (k == 'y') {\n\t\t\t\t\t\t\t\t\tobj[k] = el[k] + (scale - 1) * pointerH / 6;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tobj[k] = el[k];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tposition.push(obj);\n\t\t\t\t\t});\n\t\t\t\t\tpointer[key] = position;\n\t\t\t\t} else {\n\t\t\t\t\tpointer[key] = this.originPointer[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tpointer.width /= scale;\n\t\t\tpointer.height /= scale;\n\t\t\t\n\t\t\tthis.map.scale = scale;\n\t\t\tthis.pointer = pointer;\n\n\t\t},\n\n\t\timgTab() {\n\t\t\tif (this.showList) this.showList = false;\n\t\t},\n\n\t\tshowOrHideList() {\n\t\t\tthis.showList = !this.showList;\n\t\t},\n\n\t\tgoListDetail(z_id) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '../detail/detail?z_id=' + z_id + '&title=' + this.title,\n\t\t\t});\n\t\t}\n\n\n\t},\n\n\tcomponents: {\n\t\tmyNav,\n\t\tscrollY\n\t}\n}\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=3a1757a2&scoped=true&\"\nimport script from \"./map.vue?vue&type=script&lang=js&\"\nexport * from \"./map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./map.vue?vue&type=style&index=0&id=3a1757a2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a1757a2\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('3a1757a2', component.options)\n    } else {\n      api.reload('3a1757a2', component.options)\n    }\n    module.hot.accept(\"./map.vue?vue&type=template&id=3a1757a2&scoped=true&\", function () {\n      api.rerender('3a1757a2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"D:/Kun Meng/HBuilderProjects/tour/pages/map/map.vue\"\nexport default component.exports","import mod from \"-!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./map.vue?vue&type=script&lang=js&\"","import mod from \"-!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./map.vue?vue&type=style&index=0&id=3a1757a2&scoped=true&lang=css&\"; export default mod; export * from \"-!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./map.vue?vue&type=style&index=0&id=3a1757a2&scoped=true&lang=css&\"","export * from \"-!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\软件安装目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./map.vue?vue&type=template&id=3a1757a2&scoped=true&\""],"sourceRoot":""}