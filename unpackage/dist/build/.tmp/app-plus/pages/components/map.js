(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/components/map"],{"040a":function(i,t,o){"use strict";var n=o("aec2"),e=o.n(n);e.a},"20bc":function(i,t,o){"use strict";o.r(t);var n=o("3607"),e=o.n(n);for(var s in n)"default"!==s&&function(i){o.d(t,i,function(){return n[i]})}(s);t["default"]=e.a},3607:function(i,t,o){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return o.e("pages/components/scrollY").then(o.bind(null,"d263"))},e=23,s=23,a=20,r=20,h={data:function(){return{title:"",windowWidth:0,windowHeight:0,scale:1,logoSrc:"",z_id:"",showPointer:!0,showList:!1,currentIndex:0,currentTitle:"",map:{initScale:1,scale:1,height:0},img:{width:0,height:0,src:"",scale:1,x:0,y:0},pointer:{width:e,height:s,position:[]},originPointer:{}}},created:function(){var t=this;if(this.z_id=this.$store.state.lastHallZid,!this.z_id)return this.$common.showTips("展馆id为空");this.getHallInfo(),this.getMap(this.z_id),i.getSystemInfo({success:function(i){t.scale=i.windowWidth/750,t.map.height=i.windowHeight-100*t.scale,t.windowHeight=i.windowHeight-100*t.scale,t.windowWidth=i.windowWidth}})},methods:{getHallInfo:function(){var i=this;this.$api.getHallInfo({e_id:this.e_id}).then(function(t){1e3==t.status&&(i.$common.setNavTitle(t.data.hall_name),i.logoSrc=i.$store.state.ajaxUrl+t.data.hall_logo)}).catch(function(i){console.log("展厅信息获取失败"," at pages\\components\\map.vue:140")})},getMap:function(i){var t=this;this.$api.getMap({z_id:i}).then(function(i){if(1e3==i.status){if(""==i.data.hall_map||!i.data.hall_map)return void setTimeout(function(){t.$common.showTips("无对应地图,请选择其它地图")},300);i.data.items_position.forEach(function(i){i.showPic=!1}),t.img.src=t.$store.state.ajaxUrl+i.data.hall_map,t.pointer.position=i.data.items_position||[],t.currentTitle=i.data.hall_name}}).catch(function(i){console.log("地图信息获取失败",i," at pages\\components\\map.vue:163")})},imgLoad:function(t){var o=this,n=t.detail.width,h=t.detail.height,c=this.windowWidth/n,l=(this.windowHeight-100)/h;this.img.scale=c<=l?l:c,this.img.width=n*this.img.scale,this.img.height=h*this.img.scale,this.img.x=-1*(this.img.width-this.windowWidth)/2,this.img.y=-1*(this.img.height-this.map.height)/2;var p=this.pointer.position;p.forEach(function(t,n){t.x=i.upx2px((1*t.hall_position.split(",")[0]+a/2)/o.scale*o.img.scale-e/2.4),t.y=i.upx2px((1*t.hall_position.split(",")[1]+r/2)/o.scale*o.img.scale-s/1.4),t.top=!0,t.index=n,t.hall_cover=o.$store.state.ajaxUrl+t.hall_cover}),this.showPointer=!0,this.pointer.position=p;var f={};for(var u in this.pointer)"object"==typeof this.pointer[u]&&Array.isArray(this.pointer[u])?function(){var i=[];o.pointer[u].forEach(function(t,o){if("object"==typeof t){var n={};for(var e in t)n[e]=t[e]}i.push(n)}),f[u]=i}():f[u]=this.pointer[u];this.originPointer=f},showPic:function(i){var t=this;this.imgTab();var o=this.pointer.position,n=this.originPointer.position;o.forEach(function(t,e){t.showPic=n[e].showPic=i==e&&!o[i].showPic}),this.$nextTick(function(){if(t.$refs.pic&&t.$refs.pic[0]&&t.$refs.pic[0].$attrs&&!t.$refs.pic[0].$attrs.flag){var n=t.$refs.pic[0].$el.style.bottom;t.$refs.pic[0].$el.style.bottom=0,t.$refs.pic[0].$el.style.top=n}else{t.pointer.position;o[i].top=!0,t.pointer.position=o}}),this.currentIndex=i,this.pointer.position=o,this.originPointer.position=n},bindscale:function(i){var t=this,o=i.detail.scale,n={};for(var a in this.originPointer)"object"==typeof this.originPointer[a]&&Array.isArray(this.originPointer[a])?function(){var i=[];t.originPointer[a].forEach(function(t,n){if("object"==typeof t){var a={};for(var r in t)a[r]="x"==r?t[r]+(o-1)*e/8:"y"==r?t[r]+(o-1)*s/6:t[r];i.push(a)}}),n[a]=i}():n[a]=this.originPointer[a];n.width=e/o,n.height=s/o,this.map.scale=o,this.pointer=n},imgTab:function(){this.showList&&(this.showList=!1)},showOrHideList:function(){this.showList=!this.showList},goListDetail:function(t){i.navigateTo({url:"../detail/detail?z_id="+t+"&title="+this.title})}},props:["e_id"],components:{scrollY:n}};t.default=h}).call(this,o("6e42")["default"])},aec2:function(i,t,o){},b258:function(i,t,o){"use strict";var n=function(){var i=this,t=i.$createElement;i._self._c},e=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return e})},bcf0:function(i,t,o){"use strict";o.r(t);var n=o("b258"),e=o("20bc");for(var s in e)"default"!==s&&function(i){o.d(t,i,function(){return e[i]})}(s);o("040a");var a=o("2877"),r=Object(a["a"])(e["default"],n["a"],n["b"],!1,null,"1ceb6e57",null);t["default"]=r.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/components/map-create-component',
    {
        'pages/components/map-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("bcf0"))
        })
    },
    [['pages/components/map-create-component']]
]);                
