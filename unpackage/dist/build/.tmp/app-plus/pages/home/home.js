(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"0070":function(t,e,a){"use strict";a.r(e);var n=a("ae49"),i=a("395f");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("3494");var s=a("2877"),l=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"642f0eb4",null);e["default"]=l.exports},3494:function(t,e,a){"use strict";var n=a("53ac"),i=a.n(n);i.a},"395f":function(t,e,a){"use strict";a.r(e);var n=a("6cda"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},"53ac":function(t,e,a){},"6cda":function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return a.e("pages/components/swiper").then(a.bind(null,"f2ab"))},o=function(){return a.e("pages/components/tmpOne").then(a.bind(null,"a84c"))},s=function(){return a.e("pages/components/tmpTwo").then(a.bind(null,"1377"))},l=function(){return a.e("pages/components/tmpThree").then(a.bind(null,"4b2e"))},c=function(){return a.e("pages/components/nav").then(a.bind(null,"e590"))},h=function(){return a.e("pages/components/scan").then(a.bind(null,"3d1c"))},r=function(){return a.e("pages/components/map").then(a.bind(null,"bcf0"))},u=8,d={data:function(){return{windowWidth:1,windowHeight:1,loadingHeight:60,scale:1,template:1,e_id:1,title:"",logoSrc:"",swiper:{imgUrls:[]},tab:{height:"1500px",currentTab:0,z_idList:[],tabTitle:[],contents:[],swiperText:[],sendAjaxList:[],hallList:[]},navBar:{index:1}}},onLoad:function(e){var a=this;this.e_id=e.e_id||u,this.$common.showLoading(),t.getSystemInfo({success:function(t){a.windowWidth=t.windowWidth,a.windowHeight=t.windowHeight,a.scale=t.windowWidth/750}})},onReady:function(){var t=this;this.getHallInfo(function(){t.getSwiper(),t.getExhibition(function(e){t.template<4&&e.forEach(function(a,n){t.$set(t.tab.contents,n,[]),t.getInteractive(e[n],"",1,function(e){if(1e3==e.status?(t.$set(t.tab.contents,n,e.data||[]),t.$set(t.tab.sendAjaxList,n,!0),t.$set(t.tab.swiperText,n,"努力加载中...")):1006==e.status&&(t.$set(t.tab.swiperText,n,"没有更多了"),t.$set(t.tab.sendAjaxList,n,!1)),0==n){var a={length:t.tab.contents[n].length};t.setHeight(a)}})})})})},methods:{getHallInfo:function(t){var e=this;this.$api.getHallInfo({e_id:this.e_id}).then(function(a){1e3==a.status&&(e.template=1*a.data.template||1,e.title=a.data.hall_name,e.logoSrc=e.$store.state.ajaxUrl+a.data.hall_logo,e.$common.setNavTitle(e.title),t&&t())}).catch(function(t){console.log(n("展馆信息获取失败",t," at pages\\home\\home.vue:227"))})},getSwiper:function(){var t=this;this.template<4?this.$api.getSwiper123({e_id:this.e_id}).then(function(e){1e3==e.status&&(e.data.forEach(function(e){e.hall_cover=t.$store.state.ajaxUrl+e.hall_cover,e.showTitle=!0}),t.swiper.imgUrls=e.data)}).catch(function(t){console.log(n("123模板swiper获取失败",t," at pages\\home\\home.vue:245"))}):this.$api.getSwiper456({e_id:this.e_id}).then(function(e){1e3==e.status&&(e.data.forEach(function(e){e.hall_cover=t.$store.state.ajaxUrl+e.hall_cover,e.showTitle=!0}),t.swiper.imgUrls=e.data)}).catch(function(t){console.log(n("456模板swiper获取失败",t," at pages\\home\\home.vue:260"))})},getExhibition:function(t){var e=this;this.$api.getExhibition({e_id:this.e_id}).then(function(a){if(1e3==a.status){var n=[],i=[];a.data.length>4&&e.template<4?e.template=Number(e.template)+3:a.data.length<=4&&e.template>=4&&(e.template=Number(e.template)-3),a.data.forEach(function(t){var a={};a.img=e.$store.state.ajaxUrl+t.hall_cover,a.des=t.hall_summary,a.z_id=t.z_id,a.title=t.hall_name,a.hall_cover=a.img,a.hall_name=a.title,a.hall_summary=a.des,i.push(t.z_id),n.push(a)}),e.template<4?(e.tab.tabTitle=n,e.tab.z_idList=i,t&&t(i)):e.tab.hallList=n,e.$store.commit("setLastHallZid",a.data[0].z_id)}}).catch(function(t){console.log(n("展厅列表获取失败",t," at pages\\home\\home.vue:303"))})},getInteractive:function(t,e,a,i){var o=this;this.$api.getInteractive({z_id:t,i_id:e,page:a}).then(function(t){1e3==t.status?(t.data.forEach(function(e,n){e.hall_cover=o.$store.state.ajaxUrl+e.hall_cover,e.page=a,e.count=t.count}),i&&i(t)):1006==t.status&&i&&i(t)}).catch(function(t){console.log(n("展项列表获取失败",t," at pages\\home\\home.vue:325"))})},changeBigTab:function(t,e){this.tab.currentTab=t,this.$store.commit("setLastHallZid",e)},bindChange:function(t){var e=this.tab.currentTab=t.detail.current;this.$store.commit("setLastHallZid",this.tab.tabTitle[e].z_id);var a={length:this.tab.contents[e].length};this.setHeight(a)},goList:function(e){t.navigateTo({url:"../list/list?z_id="+e.z_id+"&title="+this.title})},goDetail:function(e){e.e_id?t.navigateTo({url:"../detail/detail?e_id="+e.e_id+"&title="+this.title}):t.navigateTo({url:"../detail/detail?z_id="+e.z_id+"&title="+this.title})},setHeight:function(e){var a=this;this.$nextTick(function(){var i=0,o=a.windowHeight/a.scale-652,s=t.createSelectorQuery();switch(a.template){case 1:i=177,s.select(".template1").boundingClientRect(),s.exec(function(s){var l=s&&s[0]&&s[0].height?s[0].height/a.scale:i;console.log(n("setHeight1:",s,"detailH:",l," at pages\\home\\home.vue:375"));var c=Math.max(o,e.length<10?l*e.length+a.loadingHeight-50:l*e.length+a.loadingHeight);a.tab.height=t.upx2px(c)+"px"});break;case 2:i=419,s.select(".template2").boundingClientRect(),s.exec(function(s){var l=s&&s[0]&&s[0].height?s[0].height/a.scale+20:i;console.log(n("setHeight2:",s,"detailH:",l," at pages\\home\\home.vue:387"));var c=Math.max(o,e.length<10?l*Math.ceil(e.length/2)+a.loadingHeight-30:l*Math.ceil(e.length/2)+a.loadingHeight-10);a.tab.height=t.upx2px(c)+"px"});break;case 3:i=577,s.select(".template3").boundingClientRect(),s.exec(function(s){var l=s&&s[0]&&s[0].height?s[0].height/a.scale+20:i;console.log(n("setHeight3:",s,"detailH:",l," at pages\\home\\home.vue:399"));var c=Math.max(o,e.length<10?l*e.length+a.loadingHeight-50:l*e.length+a.loadingHeight-20);a.tab.height=t.upx2px(c)+"px"});break}})},changeBarIndex:function(t){this.navBar.index=t}},onShow:function(){},components:{mySwiper:i,myNav:c,tmpOne:o,tmpTwo:s,tmpThree:l,tabScan:h,tabMap:r},onReachBottom:function(){var t=this,e=this.tab.currentTab;if(!(this.template>3)&&this.tab.sendAjaxList[e]){var a=this.tab.z_idList[e],n=this.tab.contents[e].slice(-1)[0].z_id,i=1+Number(this.tab.contents[e].slice(-1)[0].page);this.getInteractive(a,n,i,function(a){if(1e3==a.status){var n=t.tab.contents[e],i=a.count;n=n.concat(a.data),t.$set(t.tab.contents,e,n),n.length>=i&&(t.$set(t.tab.sendAjaxList,e,!1),t.$set(t.tab.swiperText,e,"没有更多了"));var o={length:t.tab.contents[e].length};t.setHeight(o)}else 1006==a.status&&(t.$set(t.tab.sendAjaxList,e,!1),t.$set(t.tab.swiperText,e,"没有更多了"))})}}};e.default=d}).call(this,a("6e42")["default"],a("0de9")["default"])},ae49:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})}},[["1fb5","common/runtime","common/vendor"]]]);